# AI 编剧室 - 测试指南

## 🧪 测试清单

### 1. 基础功能测试

#### ✅ 初始化测试
- [ ] 访问 http://localhost:54112
- [ ] 确认页面加载正常，显示"开始创作你的电影剧本"
- [ ] 确认输入框可以正常输入
- [ ] 确认"开始创作"按钮存在

#### ✅ 角色生成测试
**测试用例 1: 基本角色生成**
- 输入主题: "一个赛博侦探追捕失控的仿生人"
- 点击"开始创作"
- 预期结果:
  - [ ] 显示"正在初始化编剧室..."
  - [ ] 显示"正在召集演员..."
  - [ ] 生成 4 个独特的角色
  - [ ] 每个角色包含: 名字、背景、性格特征、说话风格
  - [ ] 角色展示 3 秒后自动进入创作阶段

**测试用例 2: 不同主题的角色生成**
测试以下主题，确认角色多样性:
- [ ] 科幻类: "2077年，黑客发现控制全人类的阴谋"
- [ ] 悬疑类: "侦探调查一系列神秘失踪案件"
- [ ] 爱情类: "平行宇宙的恋人试图打破维度壁垒"
- [ ] 动作类: "退役特工为救女儿重返江湖"

### 2. 多智能体协作测试

#### ✅ 导演智能体
- [ ] 成功规划场景（显示"导演正在规划第 X 场戏..."）
- [ ] 生成场景标题（格式: "内景/外景. 地点 - 时间"）
- [ ] 设定场景目标和氛围
- [ ] 选择合适的角色出场
- [ ] 提供场景开场动作描述

#### ✅ 演员智能体
- [ ] 每个角色生成对话（显示"[角色名] 正在思考台词..."）
- [ ] 对话符合角色性格和说话风格
- [ ] 对话推动场景目标
- [ ] 每场 8-12 轮对话
- [ ] 角色不会连续两次说话（除非只有一个角色）

#### ✅ 总结员智能体
- [ ] 每场戏结束后生成摘要
- [ ] 提取 3-5 个关键事件
- [ ] 更新整体故事摘要

### 3. 剧本格式测试

#### ✅ 剧本面板（左侧）
- [ ] 显示剧本标题（居中、加粗）
- [ ] 场景标题（大写、加粗）
- [ ] 动作描述（普通文本）
- [ ] 角色对白（角色名居中、台词居中显示）
- [ ] 使用等宽字体（Monospace）
- [ ] 自动滚动到最新内容

#### ✅ 活动日志面板（右侧）
- [ ] 显示智能体活动
- [ ] 不同智能体有不同颜色图标:
  - 🎬 导演 (紫色)
  - 👤 演员 (蓝色)
  - 📝 记录员 (绿色)
  - 📚 总结员 (橙色)
  - ⚙️ 系统 (灰色)
- [ ] 显示时间戳
- [ ] 自动滚动到最新日志

### 4. 控制功能测试

#### ✅ 暂停/继续
- [ ] 点击"暂停"按钮
- [ ] 确认创作暂停（状态显示"⏸ 已暂停"）
- [ ] 点击"继续"按钮
- [ ] 确认创作继续

#### ✅ 角色列表
- [ ] 点击"角色列表"按钮
- [ ] 侧边栏滑出显示所有角色
- [ ] 显示完整的角色信息
- [ ] 可以关闭侧边栏

#### ✅ 复制功能
- [ ] 点击"复制"按钮
- [ ] 按钮文字变为"已复制！"
- [ ] 粘贴到文本编辑器，确认格式正确

#### ✅ 导出功能
- [ ] 点击"导出文本"按钮
- [ ] 下载 `.txt` 文件
- [ ] 打开文件，确认内容完整且格式正确

#### ✅ 重新开始
- [ ] 点击"重新开始"按钮
- [ ] 确认回到初始页面
- [ ] 所有状态已清除

### 5. 自动流程测试

#### ✅ 完整剧本生成
- [ ] 启动创作流程
- [ ] 自动生成 5-8 场戏
- [ ] 每场戏自动进入下一场
- [ ] 最后一场标记为完成
- [ ] 状态栏显示"🎬 剧本创作完成！"

#### ✅ 场景进度
- [ ] 状态栏正确显示当前场景编号
- [ ] 显示当前剧本总行数
- [ ] 实时更新当前阶段（规划/表演/总结）

### 6. 响应式设计测试

#### ✅ 桌面端（>1024px）
- [ ] 左右分屏布局正常
- [ ] 剧本面板占 2/3 宽度
- [ ] 活动日志占 1/3 宽度

#### ✅ 平板端（768px - 1024px）
- [ ] 布局适配良好
- [ ] 可以正常阅读和操作

#### ✅ 移动端（<768px）
- [ ] 垂直堆叠布局
- [ ] 所有按钮可点击
- [ ] 文字大小适中

### 7. 错误处理测试

#### ✅ API 错误
- [ ] 临时修改 `.env.local` 中的 API key 为无效值
- [ ] 尝试创作
- [ ] 确认显示错误消息
- [ ] 恢复正确的 API key

#### ✅ 网络错误
- [ ] 断开网络连接
- [ ] 尝试创作
- [ ] 确认显示相应错误

#### ✅ 空输入
- [ ] 不输入主题，直接点击"开始创作"
- [ ] 确认按钮禁用或显示提示

### 8. 性能测试

#### ✅ 初始加载
- [ ] 首次加载时间 < 3 秒
- [ ] 无明显卡顿

#### ✅ 创作过程
- [ ] 实时流式显示，无延迟
- [ ] 日志滚动流畅
- [ ] 长时间运行（10+ 场戏）无内存泄漏

#### ✅ 大型剧本
- [ ] 生成 100+ 行剧本后
- [ ] 滚动流畅
- [ ] 复制/导出功能正常

### 9. 浏览器兼容性测试

- [ ] Chrome (最新版本)
- [ ] Firefox (最新版本)
- [ ] Safari (最新版本)
- [ ] Edge (最新版本)

### 10. AI 输出质量测试

#### ✅ 角色质量
- [ ] 角色名字符合主题
- [ ] 背景故事合理、有深度
- [ ] 性格特征具体、可执行
- [ ] 说话风格有辨识度

#### ✅ 对话质量
- [ ] 对话推动情节发展
- [ ] 符合角色性格
- [ ] 有冲突和张力
- [ ] 中文表达自然流畅

#### ✅ 场景质量
- [ ] 场景设定合理
- [ ] 场景目标明确
- [ ] 场景之间有逻辑连接
- [ ] 整体故事连贯

#### ✅ 故事完整性
- [ ] 有明确的开始
- [ ] 有戏剧冲突
- [ ] 有情节发展
- [ ] 有合理的结局

---

## 🐛 已知问题

### 低优先级
- [ ] 暂停后继续，可能会有短暂延迟
- [ ] 超长对话可能导致滚动条跳动
- [ ] 移动端侧边栏关闭按钮位置可能需要优化

---

## 📝 测试报告模板

```markdown
## 测试日期: YYYY-MM-DD
## 测试者: [名字]
## 测试环境:
- 浏览器: [Chrome 120.0]
- 操作系统: [macOS 14.0]
- 屏幕分辨率: [1920x1080]

### 测试结果
- ✅ 通过: X 项
- ❌ 失败: Y 项
- ⚠️  警告: Z 项

### 详细问题
1. **问题描述**
   - 严重程度: [高/中/低]
   - 复现步骤: ...
   - 预期结果: ...
   - 实际结果: ...
   - 截图: ...

### 总体评价
[整体评价和建议]
```

---

## 🚀 快速测试脚本

创建一个快速测试流程:

### 5 分钟快速测试
1. 输入主题: "一个赛博侦探追捕失控的仿生人"
2. 等待角色生成（3秒）
3. 观察第 1 场创作过程
4. 暂停，检查剧本格式
5. 继续，等待完成
6. 测试复制功能
7. 测试导出功能
8. 重新开始

### 30 分钟完整测试
1. 依次测试 4 种不同主题
2. 每个主题生成完整剧本
3. 测试所有控制功能
4. 测试响应式设计
5. 检查 AI 输出质量
6. 记录任何异常

---

## 📊 质量标准

### 必须通过 (Must Pass)
- ✅ 基础功能: 100% 通过
- ✅ 多智能体协作: 100% 通过
- ✅ 剧本格式: 100% 通过
- ✅ 控制功能: 100% 通过

### 应该通过 (Should Pass)
- ✅ 响应式设计: 90% 通过
- ✅ 性能测试: 90% 通过
- ✅ AI 输出质量: 80% 通过

### 建议通过 (Nice to Have)
- ✅ 浏览器兼容性: 80% 通过
- ✅ 边缘情况处理: 70% 通过

---

## 🎯 发布前检查清单

- [ ] 所有核心功能测试通过
- [ ] 在至少 2 个浏览器测试通过
- [ ] 响应式设计在主流设备测试通过
- [ ] API 密钥正确配置
- [ ] 无明显性能问题
- [ ] 错误处理完善
- [ ] 用户体验流畅
- [ ] 代码无明显 bug
- [ ] 文档完整

---

## 💡 测试技巧

1. **使用不同主题** - 确保 AI 能处理各种类型
2. **中断测试** - 在不同阶段暂停，确保状态正确
3. **长时间运行** - 测试内存和性能
4. **边界条件** - 空输入、超长输入等
5. **快速操作** - 连续点击按钮，测试竞态条件

祝测试顺利！🎉
